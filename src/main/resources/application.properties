# Load local .env into Spring environment (optional)
# Note: do not commit secrets in .env to version control.
spring.config.import=optional:dotenv:

# Flyway migrations (applies SQL files in classpath:db/migration on startup)
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration

# Server port (use env var SERVER_PORT to override). Defaults to 8081 to avoid conflicts with local services on 8080.
server.port=${SERVER_PORT:8081}

# Spring Data Source using Environment Variables
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
# driver-class-name removed to let Spring auto-detect driver from the URL

# JPA / Hibernate Settings
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Hikari Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JWT Settings (referencing .env)
application.security.jwt.secret-key=${JWT_SECRET:default_secret_key_if_missing}
application.security.jwt.expiration=${JWT_EXPIRATION:86400000}